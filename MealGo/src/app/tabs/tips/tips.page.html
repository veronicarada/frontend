<ion-header>
  <ion-toolbar class="mg-toolbar">
    <ion-title>Tips</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding safe-bottom">

  <!-- Pull to refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="cargarTips($event)">
    <ion-refresher-content pullingText="Desliza para actualizar"></ion-refresher-content>
  </ion-refresher>

  <!-- ðŸ” Buscador -->
  <ion-item class="mg-search">
    <ion-icon name="search" slot="start" aria-hidden="true"></ion-icon>
    <ion-input
      placeholder="Buscar por tÃ­tulo o descripciÃ³n"
      [(ngModel)]="filtro"
      (ionInput)="onBuscarChange()">
    </ion-input>
  </ion-item>

  
<div class="mg-chip-scroll real-scroll">
  <ion-chip
    *ngFor="let cat of categorias"
    class="mg-chip"
    [outline]="categoriaSeleccionada !== cat.value"
    [color]="categoriaSeleccionada === cat.value ? 'primary' : undefined"
    (click)="onSeleccionCategoria(cat.value)">
    <span class="mg-chip-emoji">{{ cat.emoji }}</span>
    <span class="mg-chip-text">{{ cat.text }}</span>
  </ion-chip>
</div>

  <!-- Estado de carga -->
  <ng-container *ngIf="cargando">
    <ion-card class="mg-skeleton" *ngFor="let i of [1,2,3,4]">
      <ion-card-header>
        <div class="mg-skel-line w40"></div>
        <div class="mg-skel-line w70"></div>
      </ion-card-header>
      <ion-card-content>
        <div class="mg-skel-line w90"></div>
        <div class="mg-skel-line w80"></div>
      </ion-card-content>
    </ion-card>
  </ng-container>

  <!-- Error -->
  <ion-card *ngIf="!cargando && errorMsg">
    <ion-card-content>{{ errorMsg }}</ion-card-content>
  </ion-card>

  <!-- Lista dinÃ¡mica -->
  <ion-list *ngIf="!cargando && !errorMsg && tips.length">
    <ion-card
      class="mg-tip-card"
      *ngFor="let tip of tips"
      [ngClass]="categoryClass(tip.categoria)">

      <ion-card-header>
        <div class="mg-tip-header">
          <div class="mg-tip-emoji">{{ getEmoji(tip.categoria) }}</div>
          <ion-card-title class="mg-tip-title">{{ tip.titulo }}</ion-card-title>
        </div>

        <ion-note class="mg-badge" *ngIf="getText(tip.categoria) !== 'Tip'">
          {{ getText(tip.categoria) }}
        </ion-note>
      </ion-card-header>

      <ion-card-content>
        <p class="mg-tip-text">{{ tip.descripcion }}</p>
      </ion-card-content>
    </ion-card>
  </ion-list>

  <!-- VacÃ­o -->
  <ion-card *ngIf="!cargando && !errorMsg && !tips.length">
    <ion-card-content>No hay tips para mostrar con esos filtros.</ion-card-content>
  </ion-card>

</ion-content>
